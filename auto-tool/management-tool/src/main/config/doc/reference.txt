PrimeCloud Controller ユーザ管理ツール コマンドリファレンス ver 1.4.1

各コマンドの利用方法、仕様を記述しています。

■コマンド一覧

□ユーザ作成
	PCCにログインできるユーザを作成します。

	# ./pcc-add-user.sh -u <ユーザ名> -p <パスワード>

	入力文字制限について
		ユーザ名は半角英数と-(ハイフン)のみ使用できます。
		パスワードには' " & > < の文字は使用することが出来ません。
		シェルスクリプトで利用可能な記号はエスケープして入力してください。
		ユーザ名、パスワード共に15文字以内で入力してください。

	ユーザの作成に成功すると、PCC、Zabbixでログイン可能なユーザが作られます。
	ただし、PCCの設定でZabbixを使用しない設定の場合、Zabbixのユーザは作成されません。

	作成されたユーザの初期状態は「有効」状態です。

	実行後に公開鍵、秘密鍵のキーペアが作成されます。
	このキーペアはAWS、VMware共に共通で利用します。

	作成されたキーは<TOOL_HOME>/key_pair/以下にあります。
	秘密鍵はユーザ名.pem、公開鍵はユーザ名.pubです。
	SSHログイン用のキーを利用者に配布する際は、ユーザ名.pemファイルを配布してください。

□ユーザ一覧表示
	作成されたユーザの一覧を表示します。
	ユーザが使用可能なプラットフォームも確認できます。

	# ./pcc-show-user.sh

	Usernameはユーザ名が表示されます。
	Statusにはユーザの有効状態が表示されます。
	ステータスの意味は以下の通りです。
	　enable : 有効
	　disable : 無効
	有効の場合、PCC及びZabbixにログインが可能です。
	無効の場合、ログインは出来ません。
	Platformには利用可能なプラットフォーム名がスペース区切りで表示されます。

□プラットフォーム一覧表示
	使用可能なプラットフォームの一覧が表示されます。

	# ./pcc-show-platform.sh

	PCCがで利用しているauto-config.xml内で定義されているプラットフォームの一覧です。
	PlatformNameにはプラットフォーム名が表示されます。
	ユーザのプラットフォームを有効化する場合は、PlatformNameに表示された文字を使用してください。

□AWSプラットフォーム有効化
	ユーザにAWSのプラットフォームを追加します。
	AWSで使用可能なプラットフォームのみを登録することができます。
	EC2及びVPCが対象です。
	プラットフォーム名には、プラットフォーム一覧表示で表示されたプラットフォーム名を使用してください。

	# ./pcc-enable-user-aws.sh -u <ユーザ名> -P <プラットフォーム名>

	PCCのAWSへの認証情報テーブルにレコードを追加し、
	ユーザ名.pubの公開鍵情報を読み込み、AWSにインポートします。
	AWSに追加されるキーペアの名前はユーザ名です。
	すでに同様の名前のキーペアがAWSに登録されている場合、キーペアの登録はスキップされます。

	デフォルトでは設定ファイルに記述されているACCESS_IDとSECRET_KEYで追加されます。
	オプションを追加することで、任意のACCESS_IDとSECRET_KEYで追加することが出来ます。

	# ./pcc-enable-user-aws.sh -u <ユーザ名> -P <プラットフォーム名> -a <ACCESS_ID> -s <SECRET_KEY>

	すでに作成されているキーペア及びPCCの認証情報を上書きすることは出来ません。

	※Eucalyptus、NiftyCloudの有効化には対応していません。

□VMwareプラットフォーム有効化
	ユーザにVMwareのプラットフォームを追加します。
	VMwareで使用可能なプラットフォームのみを登録することができます。

	# ./pcc-enable-user-vmware.sh -u <ユーザ名> -P <プラットフォーム名>

	PCCのVMwareへの認証情報テーブルに公開鍵情報を追加します。
	VMwareで起動したサーバにはユーザ名.pemのキーでログインすることが出来ます。

	プラットフォーム名には、プラットフォーム一覧表示で表示されたプラットフォーム名を使用してください。

	※Eucalyptus、NiftyCloudの有効化には対応していません。

□CloudStackプラットフォーム有効化
	ユーザにCloudStackのプラットフォームを追加します。
	CloudStackで使用可能なプラットフォームのみを登録することができます。
	プラットフォーム名には、プラットフォーム一覧表示で表示されたプラットフォーム名を使用してください。

	# ./pcc-enable-user-cloudstack.sh -u <ユーザ名> -P <プラットフォーム名>

	PCCのCloudStackへの認証情報テーブルにレコードを追加し、
	ユーザ名.pubの公開鍵情報を読み込み、CloudStackにインポートします。
	CloudStackに追加されるキーペアの名前はユーザ名です。
	すでに同様の名前のキーペアがCloudStackに登録されている場合、キーペアの登録はスキップされます。

	デフォルトでは設定ファイルに記述されているACCESS_IDとSECRET_KEYで追加されます。
	オプションを追加することで、任意のACCESS_IDとSECRET_KEYで追加することが出来ます。

	# ./pcc-enable-user-cloudstack.sh -u <ユーザ名> -P <プラットフォーム名> -a <ACCESS_ID> -s <SECRET_KEY>

	すでに作成されているキーペア及びPCCの認証情報を上書きすることは出来ません。

	※Eucalyptus、NiftyCloudの有効化には対応していません。

□ユーザパスワード変更
	作成されたユーザのパスワードを変更します。

	# ./pcc-modify-user.sh -u <ユーザ名> -p <パスワード>

	入力文字制限について
		パスワードには' " & > < の文字は使用することが出来ません。
		シェルスクリプトで利用可能な記号はエスケープして入力してください。
		パスワードは15文字以内で入力してください。

	無効化されたユーザのパスワードは変更できません。
	有効にしてから、変更してください。

	パスワードの変更が有効になる範囲
	・ PCCのログインパスワード
	・ Zabbixのログインパスワード
	・ 停止中のLinuxサーバのログインパスワード
	パスワードの変更が有効にならない範囲
	・ キーペア
	・ 既に起動中のサーバ及びサービス

	Linuxの場合、パスワードは起動時に変更されます。
	Windowsの場合、パスワードは初回起動時に設定され、変更されません。

	すでにログイン済みのユーザはそのまま利用可能です。
	次回ログイン時より、有効になります。

□ユーザ無効化
	PCC、Zabbixにログイン可能なユーザをログイン不可にします。

	# ./pcc-disable-user.sh -u <ユーザ名>

	無効化されたユーザは、次回からPCC、Zabbixにログインできなくなります。
	すでにPCC、Zabbixにログインしているユーザはそのまま利用可能です。
	また、起動中のサーバ及びサービスは利用可能です。

□ユーザ有効化
	PCC、Zabbixにログイン不可のユーザをログイン可能にします。

	# ./pcc-enable-user.sh -u <ユーザ名>

	有効化されたユーザは、PCC、Zabbixにログインできるようになります。

□ヘルプ表示
	利用可能なコマンドの一覧が表示されます。

	# ./pcc-usage.sh

	各コマンドに-hオプションを付けることでも、同様に表示できます。

	例)
	# ./pcc-add-user.sh -h



